<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <title>修改直播</title>
    <link href="__STYLE__css/bootstrap.min.css?v=3.4.0" rel="stylesheet">
    <link href="__STYLE__css/animate.min.css" rel="stylesheet">
    <link href="__STYLE__css/style.min.css?v=3.1.0" rel="stylesheet">
    <script type="text/javascript" charset="utf-8" src="__STYLE__ueditor/ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="__STYLE__ueditor/ueditor.all.min.js"> </script>
    <style>
        .droppable-active {
            background-color: #ffe !important;
        }

        .tools a {
            cursor: pointer;
            font-size: 80%;
        }

        .form-body .col-md-6,
        .form-body .col-md-12 {
            min-height: 400px;
        }

        .draggable {
            cursor: move;
        }
    </style>
</head>
<body class="gray-bg">
<div class="wrapper wrapper-content">

    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>修改直播</h5>
                </div>
                <div class="ibox-content">
                    <form method="post" action="{:U('Solive/update_solive')}" role="form" class="form-horizontal m-t" enctype="multipart/form-data">
                        <input type="hidden" value="{$data.solive_id}" name="solive_id">
                        <div class="form-group draggable">
                            <label class="col-sm-3 control-label">直播标题：</label>
                            <div class="col-sm-3">
                                <input type="text" name="so_title" class="form-control" value="{$data.so_title}">
                            </div>
                        </div>
                        <div class="form-group draggable">
                            <label class="col-sm-3 control-label">直播简介：</label>
                            <div class="col-sm-3">
                                <input type="text" name="so_detail" class="form-control" value="{$data.so_detail}">
                            </div>
                        </div>
                        <div class="form-group draggable">
                            <label class="col-sm-3 control-label">发布者：</label>
                            <div class="col-sm-3">
                                <input type="text" name="so_author" class="form-control" value="{$data.so_author}">
                            </div>
                        </div>
                        <div class="form-group draggable">
                            <label class="col-sm-3 control-label">封面图片：</label>
                            <div class="col-sm-3">
                                <input type="file" name="img" class="form-control" onchange="imgPreview(this)">
                                <img src="__ROOT__/{$data.img}" style="width: 50%;" id="preview">
                                <input type="hidden" name="img" value="{$data.img}">
                            </div>
                        </div>
                        <div class="form-group draggable">
                            <label class="col-sm-3 control-label">直播链接：</label>
                            <div class="col-sm-9">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-content no-padding">
                                        <script id="editor" type="text/plain" style="width:100%;height:300px;">
                                            {$data.so_link}
                                        </script>
                                        <script type="text/javascript">
                                        var ue = UE.getEditor('editor',{
                                            width:'100%',
                                            height:'300px',
                                            textarea:'so_link',
                                        });
                                        function setContent(data){
                                            ue.setContent(data);
                                        }
                                        </script>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="hr-line-dashed"></div>
                        <div class="form-group draggable">
                            <div class="col-sm-3 col-sm-offset-3">
                                <button class="btn btn-primary" type="submit">修改</button>
                                <a class="btn btn-white" href="{:U('Solive/index')}">取消</a>
                            </div>
                        </div>
                    </form>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
    </div>

</div>
</body>
<script type="text/javascript">
    function imgPreview(fileDom){
        //判断是否支持FileReader
        if (window.FileReader) {
            var reader = new FileReader();
        } else {
            alert("您的设备不支持图片预览功能，如需该功能请升级您的设备！");
        }
        //获取文件
        var file = fileDom.files[0];
        //读取完成
        reader.onload = function(e) {
            //获取图片dom
            var img = document.getElementById("preview");
            //图片路径设置为读取的图片
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }
</script>
</html>